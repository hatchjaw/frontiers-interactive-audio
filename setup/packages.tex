\usepackage{
    url,
    hyperref,
    lineno,
    microtype,
    subcaption,
    booktabs,
    paralist,
    tablefootnote
}

\usepackage[onehalfspacing]{setspace}

% Hyperref
\hypersetup{
    pdfpagelabels=true,
    plainpages=false,
%    pdfauthor={Author(s)},
    pdftitle={Title},
    pdfsubject={Subject},
    bookmarksnumbered=true,
    colorlinks,
    citecolor=green!45!black,
    filecolor=cyan!55!black,
    linkcolor=red!55!black,
    urlcolor=magenta!55!black,
    pdfstartview=FitH
}

% Bibliography
%\AtEveryBibitem{
%    \clearfield{note}
%    \clearlist{language}
%    \clearfield{isbn}
%%    \clearfield{doi}
%}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Code listings
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{inconsolata}

% Code listings with package minted. Requires python
%   pyenv virtualenv 3.x.x myenv
%   pyenv activate myenv
%   pip install pygments
% Then add compilation flag -shell-escape
\usepackage[outputdir=out,newfloat]{minted}
%\usepackage[outputdir=out]{minted}

\usepackage[skins, breakable]{tcolorbox}
\tcbuselibrary{minted}

% Code listing, e.g.
%
%     \begin{codelisting}{
%         \texttt{update} method of the networked audio client implementation,
%         minted style=xcode,
%         minted language=cpp,
%         label=ls:njc-update,
%         float=h!
%     }
%         void NetJUCEClient::update(void) {
%             doAudioOutput();
%
%             handleAudioInput();
%         }
%     \end{codelisting}
\newtcblisting[auto counter]{codelisting}[1]{%
    enhanced,
%    breakable,
%    colback=backcolour,
%    colframe=captioncolor,
    fonttitle=\bfseries\normalsize,
    listing only,
    sharp corners,
    bottomrule=1pt,
    toprule=2pt,
    leftrule=0pt,
    rightrule=0pt,
    title=Listing \thetcbcounter: #1,
    minted style=xcode,
    minted options={
        fontsize=\scriptsize,
        autogobble
    }
}

% Input code from file, e.g.
%
%       \codeinputlisting[float=h]
%          {text}
%          {listings/udp-packet.txt}
%          {Network capture: ethernet frame containing a UDP packet}
%          {packet-hello-world}
\newtcbinputlisting[use counter from=codelisting]{\codeinputlisting}[5][]{
    minted language=#2,
    listing file={#3},
    title=Listing \thetcbcounter: #4,
    label=listing:#5,
    enhanced,
%    breakable,
%    colback=backcolour,
%    colframe=captioncolor,
    fonttitle=\bfseries\normalsize,
    listing only,
    sharp corners,
    bottomrule=1pt,
    toprule=2pt,
    leftrule=0pt,
    rightrule=0pt,
    minted style=xcode,
    minted options={
        fontsize=\scriptsize,
        autogobble
    },#1
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% SI Units
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{siunitx}
\sisetup{detect-all}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% TODOS
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage[
%    disable, %turn off todonotes
    colorinlistoftodos, %enable a coloured square in the list of todos
    textwidth=\marginparwidth, %set the width of the todonotes
    textsize=scriptsize, %size of the text in the todonotes
]{todonotes}
