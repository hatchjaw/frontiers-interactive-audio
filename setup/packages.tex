\usepackage{url,hyperref,lineno,microtype,subcaption,booktabs,paralist}
\usepackage[onehalfspacing]{setspace}

% Hyperref
\hypersetup{
    pdfpagelabels=true,
    plainpages=false,
%    pdfauthor={Author(s)},
    pdftitle={Title},
    pdfsubject={Subject},
    bookmarksnumbered=true,
%    colorlinks,
%    citecolor=black,
%    filecolor=black,
%    linkcolor=black,
%    urlcolor=black,
    pdfstartview=FitH
}

% Bibliography
%\AtEveryBibitem{
%    \clearfield{note}
%    \clearlist{language}
%    \clearfield{isbn}
%%    \clearfield{doi}
%}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Code listings
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{inconsolata}

% Code listings with package minted. Requires python
%   pyenv virtualenv 3.x.x myenv
%   pyenv activate myenv
%   pip install pygments
% Then add compilation flag -shell-escape
\usepackage[outputdir=out,newfloat]{minted}
%\usepackage[outputdir=out]{minted}

\usepackage[skins, breakable]{tcolorbox}
\tcbuselibrary{minted}

\newtcblisting[auto counter]{codelisting}[1]{%
    enhanced,
%    breakable,
%    colback=backcolour,
%    colframe=captioncolor,
    fonttitle=\bfseries\normalsize,
    listing only,
    sharp corners,
    bottomrule=1pt,
    toprule=2pt,
    leftrule=0pt,
    rightrule=0pt,
    title=Listing \thetcbcounter: #1,
    minted style=xcode,
    minted options={
%        fontsize=\footnotesize,
        autogobble
    }
}

\newtcbinputlisting[use counter from=codelisting]{\codeinputlisting}[5][]{
    minted language=#2,
    listing file={#3},
    title=Listing \thetcbcounter: #4,
    label=listing:#5,
    enhanced,
%    breakable,
%    colback=backcolour,
%    colframe=captioncolor,
    fonttitle=\bfseries\normalsize,
    listing only,
    sharp corners,
    bottomrule=1pt,
    toprule=2pt,
    leftrule=0pt,
    rightrule=0pt,
    minted style=xcode,
    minted options={
%        fontsize=\footnotesize,
        autogobble
    },#1
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% SI Units
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\usepackage[binary-units]{siunitx}
\usepackage{siunitx}
\sisetup{detect-all}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% TODOS
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage[
%    disable, %turn off todonotes
    colorinlistoftodos, %enable a coloured square in the list of todos
    textwidth=\marginparwidth, %set the width of the todonotes
    textsize=scriptsize, %size of the text in the todonotes
]{todonotes}
